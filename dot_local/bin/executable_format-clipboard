#!/usr/bin/env sh
language=$(pbpaste | guesslang | ggrep -oP ': \K.*')

echo "$language"

case $language in
Python)
	command="ruff check --fix --select I - | ruff format -"
	;;
SQL)
	command="sql-formatter --language bigquery"
	;;
*)
	command="echo $language"
	;;
esac

pbpaste | eval "$command" | ghead --bytes -1 | pbcopy
