#!/usr/bin/env sh
language=$(pbpaste | guesslang | ggrep -oP ': \K.*')

case $language in
Python)
	pbpaste | ruff check --fix --select I - | ruff format - | ghead --bytes -1 | pbcopy
	;;
SQL)
	pbpaste | sql-formatter --language bigquery | ghead --bytes -1 | pbcopy
	;;
*)
	pbcopy "$language"
	;;
esac
