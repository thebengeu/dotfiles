#!/usr/bin/env sh
language=$(pbpaste | guesslang --probabilities | grep -Eo -m 1 'Python|SQL')

echo "$language"

case $language in
Python)
	command="ruff check --fix --select I - | ruff format -"
	;;
SQL)
	command="sql-formatter --language bigquery"
	;;
esac

pbpaste | eval "$command" | ghead --bytes -1 | pbcopy
