{{range $name, $body_and_parameters := .functions -}}
function {{$name}} (
{{- range $i, $parameter := $body_and_parameters.parameters -}}
  {{- if $i}}, {{end -}}
  ${{$parameter -}}
{{end -}}
)
{
{{- range $body_and_parameters.body}}
  {{. -}}
{{end}}
}
{{- end}}

{{range $alias, $command := .aliases -}}
{{if $command | contains " " -}}
function {{$alias}}
{
  {{- if $command | hasPrefix (print $alias " ") }}
  & $(Get-Command -CommandType Application {{$alias}}){{ $command | trimPrefix $alias }} $args
  {{- else}}
  {{$command}} $args
  {{- end}}
}
{{else -}}
Set-Alias {{$alias}} {{$command}}
{{end}}
{{end -}}
{{range $git_alias, $command := .git_aliases -}}
function g{{$git_alias}}
{
  git {{$command}} $args
}
{{range $prefix, $directory := $.alias_directories}}
function {{$prefix}}g{{$git_alias}}
{
  git -C {{$directory | replace "~" "$HOME"}} {{$command}} $args
}
{{end -}}
{{end -}}
{{range $prefix, $directory := $.alias_directories}}
function {{$prefix}}lg
{
  lazygit --path {{$directory | replace "~" "$HOME" }} $args
}

function {{$prefix}}n
{
  nvim --cmd "cd {{$directory}}" $args
}
{{end -}}
